# 用户故事1 - 数据字段一致性手动测试流程

**用户故事**: US1 - 小程序端剧本数据展示
**测试目标**: 验证小程序端显示的剧本数据字段与管理端完全一致
**优先级**: P1 (MVP)
**预计测试时间**: 15分钟

## 测试前准备

### 环境要求
- 小程序开发环境已搭建
- 管理端数据库中有测试剧本数据
- 测试数据包含所有管理端字段

### 测试数据准备
确保管理端数据库中有以下测试剧本：

```json
{
  "_id": "test_script_001",
  "title": "数据一致性测试剧本",
  "author": "测试作者",
  "description": "用于验证小程序端数据展示的测试剧本",
  "status": "active",
  "tags": ["推理"],
  "category": "测试",
  "likes": 5,
  "usageCount": 10,
  "version": "1.0.0",
  "createTime": "2026-01-15T10:00:00Z",
  "updateTime": "2026-01-15T10:00:00Z",
  "images": ["https://example.com/test-image.jpg"]
}
```

## 测试步骤

### 步骤1: 启动小程序
1. 打开HBuilderX开发工具
2. 运行uni-app项目到小程序模拟器
3. 等待应用完全加载

**预期结果**: 小程序正常启动，显示剧本列表页面

### 步骤2: 验证剧本列表显示
1. 查看剧本列表中的第一项
2. 检查以下字段是否正确显示：
   - ✅ 标题: "数据一致性测试剧本"
   - ✅ 作者: "测试作者"
   - ✅ 点赞数: 5
   - ✅ 图片: 显示测试图片

**预期结果**: 所有字段都正确显示，没有显示"undefined"或默认占位符

### 步骤3: 验证剧本详情页
1. 点击测试剧本进入详情页面
2. 检查以下字段是否正确显示：
   - ✅ 标题和作者
   - ✅ 描述: "用于验证小程序端数据展示的测试剧本"
   - ✅ 状态: 显示为激活状态（如果有状态指示器）
   - ✅ 标签: 显示"推理"标签
   - ✅ 点赞数和使用次数
   - ✅ 创建时间和更新时间

**预期结果**: 所有管理端字段都正确显示在详情页面

### 步骤4: 验证数据刷新
1. 返回列表页面
2. 执行下拉刷新操作
3. 确认数据重新加载完成

**预期结果**: 数据刷新成功，显示最新数据

## 验收标准

### 通过标准
- [ ] 所有必填字段（标题、作者）正确显示
- [ ] 所有管理端新增字段（状态、标签、描述等）正确显示
- [ ] 数值字段（点赞数、使用次数）正确显示
- [ ] 图片字段正确显示
- [ ] 时间字段格式正确
- [ ] 无字段显示"undefined"或空值
- [ ] 数据刷新功能正常工作

### 失败标准
- [ ] 任何字段显示错误或缺失
- [ ] 数值字段显示为0而实际有值
- [ ] 图片无法正常加载
- [ ] 时间字段格式错误
- [ ] 应用崩溃或无法正常操作

## 常见问题排查

### 问题1: 字段显示"undefined"
**原因**: 前端字段映射配置错误
**解决**: 检查script-list.vue和script-detail.vue中的数据映射逻辑

### 问题2: 图片不显示
**原因**: 图片URL格式问题或网络问题
**解决**: 检查图片URL的有效性和网络连接

### 问题3: 数值字段显示错误
**原因**: 数据类型转换问题
**解决**: 检查云函数中的字段验证和转换逻辑

## 测试记录

| 测试轮次 | 测试日期 | 测试人员 | 结果 | 备注 |
|----------|----------|----------|------|------|
| 1 | 2026-01-15 | 系统 | | 初始测试 |

## 签核

**测试人员**: _______________
**测试日期**: _______________
**测试结果**: 通过 ☐ / 不通过 ☐