# 用户故事 1 - 搜索和筛选手动测试流程

## 测试目标
验证剧本列表的搜索和筛选功能是否正确工作

## 前置条件
- 已完成列表显示功能测试
- 数据库中有多样化的测试数据（不同标题、作者、状态、分类）
- 用户已登录管理后台

## 测试步骤

### 步骤 1: 验证搜索控件显示
1. 访问剧本管理页面
2. 确认页面顶部显示搜索输入框
3. 检查搜索框有适当的占位符文本（如"搜索剧本标题、作者..."）
4. **预期结果**: 搜索控件可见且可用

### 步骤 2: 测试基本搜索功能
1. 在搜索框中输入一个剧本标题的关键词
2. 按Enter键或点击搜索按钮
3. **预期结果**: 列表只显示包含该关键词的剧本

### 步骤 3: 测试搜索范围
1. 搜索作者姓名
2. **预期结果**: 显示该作者的所有剧本
3. 搜索剧本描述中的关键词
4. **预期结果**: 显示包含该关键词的剧本

### 步骤 4: 测试空搜索结果
1. 输入一个不存在的关键词
2. 执行搜索
3. **预期结果**: 显示"无搜索结果"或空列表提示

### 步骤 5: 测试搜索清除
1. 执行一次搜索（有结果）
2. 清除搜索框内容或点击清除按钮
3. **预期结果**: 返回显示所有剧本的完整列表

### 步骤 6: 测试搜索与分页结合
1. 执行搜索（多个结果）
2. 使用分页控件浏览搜索结果
3. **预期结果**: 分页只在搜索结果中进行，不显示非搜索结果

### 步骤 7: 测试状态筛选
1. 检查页面是否有状态筛选下拉框
2. 选择"激活"状态
3. **预期结果**: 只显示激活（active）的剧本
4. 选择"未激活"状态
5. **预期结果**: 只显示未激活（inactive）的剧本

### 步骤 8: 测试分类筛选
1. 检查页面是否有分类筛选下拉框
2. 选择一个特定分类
3. **预期结果**: 只显示该分类的剧本

### 步骤 9: 测试多条件组合
1. 同时设置搜索关键词和状态筛选
2. **预期结果**: 显示既匹配关键词又匹配状态的剧本

### 步骤 10: 测试筛选重置
1. 应用多个筛选条件
2. 点击"重置"或"清除筛选"按钮
3. **预期结果**: 所有筛选条件被清除，显示完整列表

## 验收标准

### 通过条件
- [ ] 搜索控件正确显示
- [ ] 基本搜索功能正常
- [ ] 搜索范围覆盖标题、作者、描述
- [ ] 空搜索结果处理正确
- [ ] 搜索清除功能正常
- [ ] 搜索与分页结合正确
- [ ] 状态筛选功能正常
- [ ] 分类筛选功能正常
- [ ] 多条件组合筛选正确
- [ ] 筛选重置功能正常

### 失败条件
- [ ] 搜索控件不显示或不可用
- [ ] 搜索结果不准确或不完整
- [ ] 筛选功能不工作或结果错误
- [ ] 多条件筛选逻辑错误
- [ ] 清除/重置功能不工作

## 性能测试

### 搜索响应时间
- **目标**: 搜索结果显示时间不超过3秒
- **测试方法**: 输入关键词，测量结果显示时间
- **验收**: 平均响应时间 ≤ 3秒

### 大数据集搜索
1. 在1000+条记录中搜索
2. **预期结果**: 搜索响应时间仍在可接受范围内

## 错误处理验证

### 特殊字符搜索
1. 输入包含特殊字符的搜索词（如@、#、%、&等）
2. **预期结果**: 搜索正常执行，不出现错误

### SQL注入防护
1. 输入包含SQL关键字的搜索词
2. **预期结果**: 被视为普通文本搜索，不执行SQL注入

### 网络错误处理
1. 在搜索过程中断开网络
2. **预期结果**: 显示网络错误提示，可重试搜索

## 测试记录

| 测试日期 | 测试人员 | 结果 | 备注 |
|----------|----------|------|------|
| 2026-01-14 | 系统 | 待测试 | 初始创建 |

## 问题记录

### 已知问题
- 无

### 修复记录
- 无

## 扩展测试建议

### 高级搜索功能
- 测试模糊匹配（部分词匹配）
- 测试大小写不敏感搜索
- 测试多关键词AND/OR逻辑

### 实时搜索
- 测试输入时的实时搜索建议
- 验证防抖功能（避免过度API调用）

### 搜索历史
- 测试搜索历史记录功能
- 验证历史记录的清除功能
