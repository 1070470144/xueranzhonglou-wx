# 手动测试流程：US3 更新确认

**用户故事**: US3 - 统一剧本更新管理
**测试类型**: 手动用户体验测试
**测试目标**: 验证更新操作的用户确认流程和状态反馈

## 测试环境准备

### 前置条件
- [ ] 编辑页面已加载 (`/pages/admin/scripts/edit?id=xxx`)
- [ ] 表单数据已修改
- [ ] 用户已登录

### 测试数据
- 修改内容: 至少修改3个字段
- 确认对话框文本: "确定要保存这些修改吗？"
- 成功消息: "保存成功"
- 失败消息: "保存失败"

## 测试步骤

### 步骤 1: 验证修改检测
1. 进入编辑页面
2. 修改任意字段内容
3. **预期结果**: 系统检测到修改（可通过UI变化或状态指示）

### 步骤 2: 验证保存按钮状态
1. 页面加载时，保存按钮状态
2. **预期结果**: 如果有修改，按钮应为可用状态
3. 如果没有修改，按钮应为禁用状态（可选）

### 步骤 3: 验证保存确认
1. 修改数据后点击保存按钮
2. **预期结果**: 显示确认对话框询问是否确定保存
3. 点击"取消"
4. **预期结果**: 对话框关闭，数据保持未保存状态

### 步骤 4: 验证保存执行
1. 再次点击保存按钮
2. 在确认对话框中点击"确定"
3. **预期结果**: 显示保存进度指示器
4. 保存完成后显示成功消息

### 步骤 5: 验证页面导航
1. 保存成功后
2. **预期结果**: 自动返回列表页面
3. 或者显示"继续编辑"选项

### 步骤 6: 验证状态反馈
1. 保存过程中
2. **预期结果**: 按钮显示为禁用状态，防止重复提交
3. 显示加载动画或文字

### 步骤 7: 验证取消操作
1. 修改数据后，不点击保存
2. 点击浏览器的返回按钮或页面的取消按钮
3. **预期结果**: 显示未保存提示对话框
4. 选择"离开"，确认离开页面
5. 选择"取消"，留在当前页面

## 错误情况处理

### 步骤 8: 验证保存失败处理
1. 模拟保存失败的情况
2. **预期结果**: 显示错误消息
3. 保存按钮重新变为可用状态
4. 提供重试选项

### 步骤 9: 验证网络异常处理
1. 保存过程中断开网络
2. **预期结果**: 显示网络错误提示
3. 允许用户重试或取消操作

## 用户体验验证

### 步骤 10: 验证响应时间
1. 记录点击保存到显示确认对话框的时间
2. **预期结果**: 响应时间 < 100ms
3. 记录保存操作的完成时间
4. **预期结果**: 保存时间 < 3秒（正常网络）

### 步骤 11: 验证无障碍性
1. 使用键盘操作（Tab键导航，Enter键确认）
2. **预期结果**: 所有交互元素都可以通过键盘访问
3. 检查屏幕阅读器兼容性

### 步骤 12: 验证移动端适配
1. 在移动设备上重复上述测试
2. **预期结果**: 对话框和按钮适配移动端屏幕
3. 触摸操作正常工作

## 验收标准

- [ ] 修改检测正确工作
- [ ] 保存按钮状态正确
- [ ] 保存确认对话框正常显示
- [ ] 保存执行过程正确反馈
- [ ] 页面导航符合预期
- [ ] 状态反馈清晰明了
- [ ] 取消操作有适当提示
- [ ] 错误情况正确处理
- [ ] 响应时间符合要求
- [ ] 无障碍性良好
- [ ] 移动端适配完善

## 用户反馈验证

确保以下用户体验要素：
- ✅ 明确的操作指引
- ✅ 清晰的状态指示
- ✅ 合理的等待时间
- ✅ 有意义的错误消息
- ✅ 一致的交互模式
- ✅ 适当的确认机制

## 缺陷记录

如果发现用户体验问题，请记录：
- 具体操作场景
- 用户期望的行为
- 实际体验的问题
- 建议的改进方案
- 严重程度评估
