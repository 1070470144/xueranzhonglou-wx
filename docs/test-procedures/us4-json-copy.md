# 用户故事4 - JSON复制功能手动测试流程

**用户故事**: US4 - 剧本详情复制JSON功能
**测试目标**: 验证JSON复制按钮能生成正确的浏览器可访问链接
**优先级**: P2
**预计测试时间**: 10分钟

## 测试前准备

### 环境要求
- 小程序运行在支持剪贴板的环境
- 浏览器可以访问生成的链接
- 测试剧本数据完整

## 测试步骤

### 步骤1: 复制JSON功能测试
1. 进入任意剧本详情页面
2. 点击"复制JSON地址"按钮
3. 等待"生成链接中..."提示
4. 确认显示"JSON链接已复制"成功提示

**预期结果**:
- ✅ 显示加载提示
- ✅ 显示成功提示
- ✅ 无错误提示

### 步骤2: 剪贴板内容验证
1. 在小程序外打开文本编辑器
2. 粘贴剪贴板内容
3. 验证链接格式

**预期结果**:
- ✅ 链接以"data:application/json;charset=utf-8;base64,"开头
- ✅ 链接包含base64编码的数据
- ✅ 链接格式正确

### 步骤3: 浏览器访问测试
1. 在浏览器中打开生成的链接
2. 确认JSON数据正确显示

**预期结果**:
- ✅ 浏览器显示格式化的JSON数据
- ✅ 包含完整的剧本字段信息
- ✅ 数据与剧本详情一致

### 步骤4: 不同剧本测试
1. 测试不同剧本的JSON复制功能
2. 验证每个剧本生成不同的JSON数据

**预期结果**:
- ✅ 不同剧本生成不同JSON内容
- ✅ 所有剧本的JSON复制都正常工作

## 验收标准

- [ ] 复制操作响应时间不超过2秒
- [ ] 生成的链接能在浏览器中正确打开
- [ ] JSON数据包含所有剧本字段
- [ ] 剪贴板功能在目标平台正常工作

## 常见问题排查

### 问题1: 复制失败
**原因**: 剪贴板权限或平台限制
**解决**: 检查平台剪贴板API支持情况

### 问题2: 链接无法打开
**原因**: data URL格式错误
**解决**: 检查base64编码和URL格式

### 问题3: JSON数据不完整
**原因**: 云函数数据获取问题
**解决**: 检查getScriptJson云函数的link参数处理

## 测试记录

| 测试轮次 | 测试日期 | 测试人员 | 结果 | 备注 |
|----------|----------|----------|------|------|
| 1 | 2026-01-15 | 系统 | | 初始测试 |