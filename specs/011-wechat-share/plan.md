# 实现计划：微信小程序转发功能

**功能**: 011-wechat-share
**日期**: 2026-01-22

## 功能概述

在微信小程序端接入微信原生转发功能，用户可以通过转发按钮或右上角菜单分享剧本内容到微信聊天，提升内容传播效果。

## 技术实现

### 前端实现

**1. 剧本详情页面 (script-detail.vue)**
- 添加 `onLoad` 时调用 `enableShareMenu()` 启用转发菜单
- 实现 `onShareAppMessage()` 方法处理转发逻辑
- 添加分享按钮到页面底部操作区
- 转发内容包含：
  - 标题：`{剧本标题} - {作者}`
  - 路径：`/pages/script-detail/script-detail?id={剧本ID}`
  - 缩略图：剧本封面图第一张

**2. 分享按钮功能**
- 添加"分享剧本"按钮到页面底部
- 点击时调用 `uni.showShareMenu()` 显示转发选项
- 非微信环境显示友好提示


### 条件编译

```javascript
// 仅在微信小程序中启用转发功能
// #ifdef MP-WEIXIN
wx.showShareMenu({...});
// #endif
```

## 用户体验

### 转发触发方式
1. **右上角菜单转发**: 系统自动启用，用户点击右上角"..." -> "转发"
2. **页面分享按钮**: 底部"分享剧本"按钮，点击后弹出转发选项

### 转发内容展示
- **标题**: 清晰显示剧本名称和作者
- **描述**: 自动生成，包含关键信息
- **图片**: 使用剧本封面图，提升视觉吸引力
- **链接**: 指向正确的剧本详情页面


## 验收标准

- ✅ 用户可以在剧本详情页触发转发
- ✅ 转发内容正确显示标题和图片
- ✅ 转发链接能正确跳转到对应剧本
- ✅ 兼容不同微信版本和设备
- ✅ 非微信环境有友好提示

## 安全考虑

- 转发功能不涉及敏感数据传递
- 使用微信官方API确保安全性
- 错误处理友好，不影响用户体验
