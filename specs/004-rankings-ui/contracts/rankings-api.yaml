openapi: 3.0.3
info:
  title: å°ç¨‹åºæ’è¡Œæ¦œAPI
  description: å°ç¨‹åºç«¯æ’è¡Œæ¦œæ•°æ®è·å–APIæ¥å£
  version: 1.0.0
  contact:
    name: Rankings API Support

servers:
  - url: https://unicloud.dcloud.net.cn
    description: uniCloudäº‘å¯¹è±¡æœåŠ¡

paths:
  /rankings/getRankings:
    post:
      summary: è·å–æ’è¡Œæ¦œæ•°æ®
      description: æ ¹æ®ç±»å‹è·å–æŒ‡å®šç±»å‹çš„æ’è¡Œæ¦œæ•°æ®
      operationId: getRankings
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - type
              properties:
                type:
                  type: string
                  enum: [usage, likes, hot]
                  description: æ’è¡Œæ¦œç±»å‹
                  example: "usage"
                limit:
                  type: integer
                  minimum: 1
                  maximum: 50
                  default: 20
                  description: è¿”å›æ•°é‡é™åˆ¶
                  example: 20
      responses:
        '200':
          description: æˆåŠŸè¿”å›æ’è¡Œæ¦œæ•°æ®
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/RankingItem'
                    maxItems: 50
                  totalCount:
                    type: integer
                    description: æ€»å‰§æœ¬æ•°é‡
                    example: 150
                  lastUpdated:
                    type: string
                    format: date-time
                    description: æ•°æ®æœ€åæ›´æ–°æ—¶é—´
                    example: "2026-01-16T12:00:00Z"
        '400':
          description: è¯·æ±‚å‚æ•°é”™è¯¯
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

components:
  schemas:
    RankingItem:
      type: object
      required:
        - rank
        - scriptId
        - title
        - author
        - value
      properties:
        rank:
          type: integer
          minimum: 1
          maximum: 50
          description: æ’åä½ç½®
          example: 1
        scriptId:
          type: string
          description: å‰§æœ¬ID
          example: "507f1f77bcf86cd799439011"
        title:
          type: string
          description: å‰§æœ¬æ ‡é¢˜
          example: "è¡€è‰²ä¸å¤œåŸ"
        author:
          type: string
          description: å‰§æœ¬ä½œè€…
          example: "å·é¥¼"
        value:
          type: number
          description: æ’åæŒ‡æ ‡å€¼ï¼ˆä½¿ç”¨æ¬¡æ•°/ç‚¹èµæ•°/çƒ­åº¦åˆ†æ•°ï¼‰
          example: 1250
        medal:
          type: string
          enum: ["ğŸ¥‡", "ğŸ¥ˆ", "ğŸ¥‰"]
          description: å¥–ç‰Œå›¾æ ‡ï¼ˆä»…å‰ä¸‰åï¼‰
          example: "ğŸ¥‡"
      description: æ’è¡Œæ¦œå•é¡¹æ•°æ®

    ErrorResponse:
      type: object
      properties:
        success:
          type: boolean
          example: false
        message:
          type: string
          description: é”™è¯¯ä¿¡æ¯
          example: "æ— æ•ˆçš„æ’è¡Œæ¦œç±»å‹"
        code:
          type: string
          description: é”™è¯¯ä»£ç 
          example: "INVALID_TYPE"
      required:
        - success
        - message

  securitySchemes:
    uniIdToken:
      type: apiKey
      in: header
      name: uni_id_token
      description: uni-id token for authentication

security:
  - uniIdToken: []