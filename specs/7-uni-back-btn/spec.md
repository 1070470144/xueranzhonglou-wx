# Feature Specification：替换为 uni-app 自带回退按钮

**Feature Branch**: `7-uni-back-btn`  
**Created**: 2026-01-12  
**Status**: Draft  
**Input**: 用户需求："这个按钮修改为uni-app自带的回退按钮"

## 概述

将剧本详情页左上角当前自定义/样式化的返回按钮替换为 uni-app 提供的原生回退组件或标准实现（使用内置能力实现统一的导航回退行为与样式约束），以提升一致性、减少自定义样式维护成本并保证跨平台兼容性。

## 关键概念
- Actor: 使用剧本详情页的移动端用户（含微信小程序与 HBuilderX 预览用户）  
- Action: 在详情页使用页面左上角的返回控件返回上一页  
- Constraint: 必须优先使用 uni-app 的内置组件/能力，保持无障碍与跨平台兼容；尽量避免引入外部依赖或自定义图标库

## 用户场景 & 测试

### 用户故事 1（P1）—— 使用内置回退控制进行导航  
作为剧本详情页的用户，我希望左上角的返回控件与应用其他页面保持一致并能可靠返回上一页，以便我可以快速且可预测地离开详情页。  
**独立测试**：检查页面源码是否使用 uni-app 官方导航/回退控件或等效实现；在真机/模拟器上点击按钮应立即返回上一页。  
**验收场景**：  
1. Given 用户在详情页，When 点击左上角返回控件，Then 页面调用回退并返回上一页（无错误）。  
2. Given 主题或头图变化，When 渲染返回控件，Then 控件在浅色/深色背景下可见且触控区域 >= 44×44 px。

### 用户故事 2（P2）—— 视觉一致性与易读性  
作为设计师，我希望返回控件遵循应用统一风格（优先使用 uni-app 内置方案），在头图与浅色背景下均有足够的对比度。  
**独立测试**：视觉比对（视觉回归截图）验证新控件在多种头图与背景下可辨识；样式应与应用其他页面一致。

## 功能需求（可测试）
- **FR-001**：详情页左上角必须使用 uni-app 的内置回退实现（例如使用内置导航 API 或官方组件），而非自定义外部图标文件。  
- **FR-002**：点击控件必须调用 `uni.navigateBack()` 或等效平台回退方法并返回上一页（单击必须触发一次回退）。  
- **FR-003**：控件触控目标最小为 44×44 px，视觉在浅/深背景下可辨识（对比和可访问性）。  
- **FR-004**：控件必须包含无障碍属性（`aria-label="返回"`，`role="button"` 或平台等效属性）。  
- **FR-005**：如 uni-app 内置图标类型与设计差异较大，允许通过全局样式（CSS 变量或主题）调整颜色/对比，但不得替换为外部图标库。

## 假设与约束
- 假设项目中可以直接使用 uni-app 的内置 `uni-icons` 或导航 API；如果平台差异需额外处理，则在实现中做条件判断。  
- 约束：不修改后端、不引入第三方图标库、不改变页面导航流（仅视觉与调用方式替换）。

## 验证计划
- 单元测试：断言页面模板中存在 uni-app 官方回退实现或 `uni-icons` 对应内置类型，并断言点击时调用 `uni.navigateBack()`（或模拟平台回退）。  
- 视觉回归：在浅色头图、深色头图、无头图三种场景记录截图并比对。  
- 手工验收：在 HBuilderX 与微信小程序模拟器真机预览中验证对比度、触控体验与回退行为。

## 成功标准
- **SC-001**：95% 的视觉回归检测场景中，返回控件在对比度与可见性测试中通过。  
- **SC-002**：100% 的手工点击测试能成功触发回退动作为预期（在支持的平台）。  
- **SC-003**：无额外依赖引入；相关变更通过代码审查并合入主分支。

## 关键实体
- BackButton（UI 控件）：位置、图标类型、触控区域、无障碍属性。  
- ScriptDetailPage：包含 BackButton 的页面容器。

## 输出物
- 更新后的 `spec.md`（本文件）  
- Quickstart（实现步骤）与 data-model（UI 说明）若需要将由 `/speckit.plan` 生成  
- Tasks（任务清单）供开发执行

## 备注
- 若 uni-app 提供了专门的“返回组件”或更合适的 API，应优先使用；此规范允许通过主题或样式微调以满足可见性需求，但不允许使用非内置图标库。  


