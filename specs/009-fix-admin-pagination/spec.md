# 009-fix-admin-pagination

## 概述

修复管理端剧本列表分页功能中的bug：点击下一页或页码切换时出现错误"操作失败：offset must be integer"。

## 背景

用户报告在管理端剧本列表中，当点击"下一页"按钮或切换页码时，出现错误提示："操作失败：offset must be integer"。

错误分析：
- 错误信息表明数据库查询中的 `offset` (skip) 参数不是整数类型
- 问题出现在分页参数处理过程中
- 从前端传递的分页参数可能是字符串类型，需要转换为数字

## 目标

修复分页参数处理逻辑，确保 `offset` 参数始终为有效的整数类型。

## 验收标准

- [ ] 点击下一页按钮正常工作
- [ ] 页码切换功能正常
- [ ] 分页参数正确传递给数据库查询
- [ ] 不影响现有的搜索和过滤功能

## 技术方案

### 问题定位
- 前端传递的分页参数 `page` 和 `pageSize` 可能是字符串类型
- 计算 `skip = (page - 1) * pageSize` 时，如果参数是字符串会导致结果异常

### 修复方案
- 在 `handleList` 函数中对分页参数进行类型转换
- 使用 `parseInt()` 确保参数为整数类型
- 添加参数验证和默认值处理

## 风险评估

- 修复后可能影响现有的分页逻辑
- 需要验证所有分页场景的兼容性
- 前端可能需要相应的参数传递调整